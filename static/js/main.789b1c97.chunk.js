(this["webpackJsonpgoit-react-hw-02-phonebook"]=this["webpackJsonpgoit-react-hw-02-phonebook"]||[]).push([[0],{50:function(e,t,n){e.exports=n(91)},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var a,r,c,o,s,u=n(0),i=n.n(u),l=n(21),m=n.n(l),b=n(4),g=n(3),h=n(49),d=n(6),f=n(1),p={addTaskRequest:Object(f.b)("contacts/request",(function(e,t){return{name:e,number:t}})),addTaskSuccess:Object(f.b)("contacts/success"),addTaskError:Object(f.b)("contacts/error"),getFetchRequest:Object(f.b)("contacts/getFetchRequest"),getFetchSuccess:Object(f.b)("contacts/getFetchSuccess"),getFetchError:Object(f.b)("contacts/getFetchError"),removeContactRequest:Object(f.b)("contacts/removeContactRequest"),removeContactSuccess:Object(f.b)("contacts/removeContactSuccess"),removeContactError:Object(f.b)("contacts/removeContactError"),nameCheck:Object(f.b)("contacts/check")},E=Object(f.c)([],(a={},Object(g.a)(a,p.addTaskSuccess,(function(e,t){return[].concat(Object(h.a)(e),[t.payload])})),Object(g.a)(a,p.getFetchSuccess,(function(e,t){return t.payload})),Object(g.a)(a,p.removeContactSuccess,(function(e,t){return e.filter((function(e){return e.id!==t.payload}))})),a)),j=Object(f.c)(!1,(r={},Object(g.a)(r,p.addTaskRequest,(function(){return!0})),Object(g.a)(r,p.addTaskSuccess,(function(){return!1})),Object(g.a)(r,p.addTaskError,(function(){return!1})),r)),O=Object(f.c)("",Object(g.a)({},p.nameCheck,(function(e,t){return t.payload}))),v=Object(d.c)({contacts:E,filter:O,loading:j}),C={registerRequest:Object(f.b)("auth/registerRequest"),registerSuccess:Object(f.b)("auth/registerSuccess"),registerError:Object(f.b)("auth/registerError"),loginRequest:Object(f.b)("auth/loginRequest"),loginSuccess:Object(f.b)("auth/loginSuccess"),loginError:Object(f.b)("auth/loginError"),logoutRequest:Object(f.b)("auth/logoutRequest"),logoutSuccess:Object(f.b)("auth/logoutSuccess"),logoutError:Object(f.b)("auth/logoutError"),getCurrentUserRequest:Object(f.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(f.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(f.b)("auth/getCurrentUserError")},k={name:null,email:null},S=Object(f.c)(k,(c={},Object(g.a)(c,C.registerSuccess,(function(e,t){return t.payload.user})),Object(g.a)(c,C.loginSuccess,(function(e,t){return t.payload.user})),Object(g.a)(c,C.getCurrentUserSuccess,(function(e,t){return t.payload.user})),Object(g.a)(c,C.logoutSuccess,(function(){return k})),c)),y=Object(f.c)(null,(o={},Object(g.a)(o,C.registerSuccess,(function(e,t){return t.payload.token})),Object(g.a)(o,C.loginSuccess,(function(e,t){return t.payload.token})),Object(g.a)(o,C.logoutSuccess,(function(){return null})),o)),N=Object(f.c)(null,(s={},Object(g.a)(s,C.registerError,(function(e,t){return t.payload})),Object(g.a)(s,C.loginError,(function(e,t){return t.payload})),Object(g.a)(s,C.logoutError,(function(e,t){return t.payload})),Object(g.a)(s,C.getCurrentUserError,(function(e,t){return t.payload})),s)),R=Object(d.c)({user:S,token:y,error:N}),w=n(16),q=n(47),A={key:"auth",storage:n.n(q).a,whitelist:["token"]},T=Object(f.a)({reducer:{contacts:v,auth:Object(w.g)(A,R)},middleware:Object(f.d)({serializableCheck:{ignoredActions:[w.a,w.f,w.b,w.c,w.d,w.e]}})}),_=Object(w.h)(T),L=n(48),F=n(24),U=n(17),x=n(18),z=n(20),D=n(19),I=n(8),P=n.n(I);P.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com/";var V=function(e){P.a.defaults.headers.common.Authorization="Bearer ".concat(e)},B=function(e){P.a.defaults.headers.common.Authorization=""},J={registration:function(e){return function(t){t(C.registerRequest()),P.a.post("/users/signup",e).then((function(e){V(e.data.token),console.log(e),t(C.registerSuccess(e.data))})).catch((function(e){return t(C.registerError(e))}))}},logIn:function(e){return function(t){t(C.loginRequest()),P.a.post("/users/login",e).then((function(e){V(e.data.token),console.log(e),t(C.loginSuccess(e.data))})).catch((function(e){return t(C.loginError(e))}))}},logout:function(){return function(e){e(C.logoutRequest()),P.a.post("/users/logout").then((function(){B(),e(C.logoutSuccess())})).catch((function(t){return e(C.logoutError(t))}))}},getCurrentUser:function(){return function(e,t){var n=t().auth.token;n&&(V(n),e(C.getCurrentUserRequest()),P.a.get("users/current").then((function(t){var n=t.data;return e(C.getCurrentUserSuccess(n))})).catch((function(e){return C.getCurrentUserError(e)})))}}},G=(n(78),function(e){Object(z.a)(n,e);var t=Object(D.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(g.a)({},a,r))},e.handleSubmit=function(t){t.preventDefault(),e.props.onLogin(Object(F.a)({},e.state)),e.setState({email:"",password:""})},e}return Object(x.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password;return i.a.createElement("div",{className:"login-form"},i.a.createElement("h1",{className:"login-header_description"},"Login Page"),i.a.createElement("form",{className:"origin-form-style",onSubmit:this.handleSubmit},i.a.createElement("div",{className:"login-form_style"},i.a.createElement("p",{className:"login-form_description"},"name"),i.a.createElement("input",{type:"email",name:"email",value:t,onChange:this.handleChange}),i.a.createElement("p",{className:"login-form_description"},"password"),i.a.createElement("input",{type:"password",name:"password",value:n,onChange:this.handleChange})),i.a.createElement("button",{className:"login-button",type:"submit"},"Log In")))}}]),n}(u.Component)),M=Object(b.b)(null,{onLogin:J.logIn})(G),W=(n(79),function(e){Object(z.a)(n,e);var t=Object(D.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={name:"",email:"",password:""},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(g.a)({},a,r))},e.handleSubmit=function(t){t.preventDefault(),e.props.onRegister(Object(F.a)({},e.state)),e.setState({name:"",email:"",password:""})},e}return Object(x.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.email,a=e.password;return i.a.createElement("div",{className:"register-form"},i.a.createElement("h1",{className:"register-header_description"},"Register Page"),i.a.createElement("form",{className:"origin-form_style-register",onSubmit:this.handleSubmit},i.a.createElement("div",{className:"register-form_style"},i.a.createElement("p",{className:"register-form_description"},"Name"),i.a.createElement("input",{type:"text",name:"name",value:t,onChange:this.handleChange}),i.a.createElement("p",{className:"register-form_description"},"Email"),i.a.createElement("input",{type:"email",name:"email",value:n,onChange:this.handleChange}),i.a.createElement("p",{className:"register-form_description"},"Password"),i.a.createElement("input",{type:"password",name:"password",value:a,onChange:this.handleChange})),i.a.createElement("button",{className:"register-button",type:"submit"},"registration")))}}]),n}(u.Component)),H=Object(b.b)(null,{onRegister:J.registration})(W),K=n(5),Q=function(e){return e.auth.token},X=function(e){return e.auth.user.name},Y=n(15),Z=(n(80),Object(b.b)((function(e){return{isAuthenticated:Q(e)}}))((function(e){var t=e.isAuthenticated;return i.a.createElement("div",{className:"phonebook"},i.a.createElement("h2",{className:"phonebook phonebook-head"},"Phonebook"),i.a.createElement("div",{className:"container-list"},i.a.createElement("ul",{className:"container-list_ul"},!t&&i.a.createElement("li",{className:"nav-li"},i.a.createElement(Y.b,{to:"/registration",className:"nav-ul"},"Registration")),!t&&i.a.createElement("li",{className:"nav-li"},i.a.createElement(Y.b,{to:"/login",className:"nav-ul"},"Login")),t&&i.a.createElement("li",{className:"nav-li"},i.a.createElement(Y.b,{to:"/contacts",className:"nav-ul"})))))})));n(82);P.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com/";var $=function(e){P.a.defaults.headers.common.Authorization="Bearer ".concat(e)},ee={addTask:function(e,t){return function(n,a){var r=a().auth.token;r&&($(r),n(p.addTaskRequest()),P.a.post("/contacts",{name:e,number:t}).then((function(e){n(p.addTaskSuccess(e.data))})).catch((function(e){return n(p.addTaskError(e))})))}},fetchContacts:function(){return function(e,t){var n=t().auth.token;n&&($(n),e(p.getFetchRequest()),P.a.get("/contacts").then((function(t){var n=t.data;e(p.getFetchSuccess(n))})).catch((function(t){return e(p.getFetchError(t))})))}},removeContact:function(e){return function(t){t(p.removeContactRequest()),P.a.delete("/contacts/".concat(e)).then((function(){return t(p.removeContactSuccess(e))})).catch((function(e){return t(p.removeContactError(e))}))}}},te=function(e){Object(z.a)(n,e);var t=Object(D.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={name:"",number:""},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(g.a)({},a,r))},e.onSubmit=function(t){t.preventDefault(),e.props.onAddTask(e.state.name,e.state.number),e.setState({name:"",number:""})},e}return Object(x.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"contact-form"},i.a.createElement("form",{onSubmit:this.onSubmit},i.a.createElement("div",{className:"contact-form_style"},i.a.createElement("p",{className:"contact-form_description"},"Name"),i.a.createElement("input",{type:"text",value:this.state.name,onChange:this.handleChange,name:"name",className:"contact-form_label"}),i.a.createElement("p",{className:"contact-form_description"},"Number"),i.a.createElement("input",{onChange:this.handleChange,value:this.state.number,name:"number"})),i.a.createElement("button",{type:"submit",className:"contact-form_button"},"Add contact")))}}]),n}(u.Component),ne={onAddTask:ee.addTask,handleChange:p.nameCheck},ae=Object(b.b)(null,ne)(te),re=n(32),ce=n(14),oe=function(e){return e.contacts.filter},se={getLoadingTasks:function(e){return e.contacts.loading},getFilter:oe,getVisible:Object(ce.a)([function(e){return e.contacts.contacts},oe],(function(e,t){return e.filter((function(e){return e.name.toLowerCase().includes(t)}))}))},ue=(n(83),{onRemove:ee.removeContact,onChange:p.nameCheck}),ie=Object(b.b)((function(e){return{onVisible:se.getVisible(e),value:se.getFilter(e)}}),ue)((function(e){var t=e.value,n=e.onChange,a=e.onVisible,r=e.onRemove;return i.a.createElement("div",{className:"find-input"},i.a.createElement("label",null,"Find contacts by name",i.a.createElement("input",{onChange:function(e){return n(e.target.value)},value:t,name:"filter"})),i.a.createElement(re.TransitionGroup,{component:"ul"},a.map((function(e){return i.a.createElement(re.CSSTransition,{key:e.id,classNames:"list",timeout:250},i.a.createElement("li",{className:"name-list"},e.name,":",e.number,i.a.createElement("button",{type:"button",className:"close-button",onClick:function(){return r(e.id)}},"delete")))}))))})),le=(n(89),function(e){Object(z.a)(n,e);var t=Object(D.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"componentDidMount",value:function(){this.props.onFetchContacts()}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(ae,null),i.a.createElement("h2",{className:"contacts-styles"},"Contacts"),i.a.createElement(ie,null),this.props.isLoadingTasks&&i.a.createElement("h1",{className:"loading"},"Loading"))}}]),n}(u.Component)),me={onFetchContacts:ee.fetchContacts},be=Object(b.b)((function(e){return{isLoadingTasks:se.getLoadingTasks(e)}}),me)(le),ge=(n(90),Object(b.b)((function(e){return{name:X(e),avatar:"https://www.leadcreation.com.au/wp-content/uploads/2018/11/multicultural-icon-24.jpg.png"}}),{onLogout:J.logout})((function(e){var t=e.avatar,n=e.name,a=e.onLogout;return i.a.createElement("div",{className:"user-menu"},i.a.createElement("img",{src:t,alt:"avatar",width:"32"}),i.a.createElement("span",null,"Welcome, ",n),i.a.createElement("button",{className:"logout_button",type:"button",onClick:a},"Logout"))}))),he=Object(b.b)((function(e){return{isAuthinticated:Q(e)}}))((function(e){var t=e.isAuthinticated;return i.a.createElement("div",null,t&&i.a.createElement(ge,null))})),de=n(25),fe=Object(b.b)((function(e){return{isAuthenticated:Q(e)}}))((function(e){var t=e.component,n=e.isAuthenticated,a=Object(de.a)(e,["component","isAuthenticated"]);return i.a.createElement(K.b,Object.assign({},a,{render:function(e){return n?i.a.createElement(t,e):i.a.createElement(K.a,{to:"/login"})}}))})),pe=Object(b.b)((function(e){return{isAuthenticated:Q(e)}}))((function(e){var t=e.component,n=e.isAuthenticated,a=e.restricted,r=Object(de.a)(e,["component","isAuthenticated","restricted"]);return i.a.createElement(K.b,Object.assign({},r,{render:function(e){return n&&a?i.a.createElement(K.a,{to:"/contacts"}):i.a.createElement(t,e)}}))})),Ee=function(){return i.a.createElement("div",null,i.a.createElement(Z,null),i.a.createElement(he,null),i.a.createElement(K.d,null,i.a.createElement(fe,{path:"/contacts",exact:!0,component:be}),i.a.createElement(pe,{path:"/registration",component:H,restricted:!1}),i.a.createElement(pe,{path:"/login",component:M,restricted:!0})))};m.a.render(i.a.createElement(b.a,{store:T},i.a.createElement(L.a,{loading:null,persistor:_},i.a.createElement(Y.a,null,i.a.createElement(Ee,null)))),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.789b1c97.chunk.js.map